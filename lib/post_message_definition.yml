account_payload: &account_payload
  guid: string

account_properties: &account_properties
  payload: *account_payload

user_session_properties: &user_session_properties
  user_guid: string
  session_guid: string

post_messages:
  widget:
    generic:
      load:
        payload: {}
      ping:
        payload:
          <<: *user_session_properties
      focusTrap:
        payload:
          <<: *user_session_properties
    # This list was taken from this documentation:
    # https://docs.mx.com/api#connect_postmessage_events
    connect:
      loaded:
        payload:
          <<: *user_session_properties
          initial_step:
            - search
            - selectMember
            - enterCreds
            - mfa
            - connected
            - loginError
            - disclosure
      enterCredentials:
        payload:
          <<: *user_session_properties
          institution:
            code: string
            guid: string
      institutionSearch:
        payload:
          <<: *user_session_properties
          query: string
      selectedInstitution:
        payload:
          <<: *user_session_properties
          code: string
          guid: string
          name: string
          url: string
      memberConnected:
        payload:
          <<: *user_session_properties
          member_guid: string
      connected/primaryAction:
        payload:
          <<: *user_session_properties
      memberDeleted:
        payload:
          <<: *user_session_properties
          member_guid: string
      createMemberError:
        payload:
          <<: *user_session_properties
          institution_guid: string
          institution_code: string
      memberStatusUpdate:
        payload:
          <<: *user_session_properties
          member_guid: string
          connection_status: number
      oauthError:
        payload:
          <<: *user_session_properties
          member_guid: string
      oauthRequested:
        warning: |
          By passing your own method to this prop, you are overriding the
          default behaviour of the SDK which is to load the OAuth URL in a new
          browser tab.
        payload:
          <<: *user_session_properties
          url: string
          member_guid: string
      stepChange:
        payload:
          <<: *user_session_properties
          previous: string
          current: string
      submitMFA:
        payload:
          <<: *user_session_properties
          member_guid: string
      updateCredentials:
        payload:
          <<: *user_session_properties
          member_guid: string
          institution:
            code: string
            guid: string
    pulse:
      overdraftWarning/cta/transferFunds:
        payload:
          account_guid: string
          amount: number

  entity:
    account:
      created: *account_properties
